---
title: 计算两个日期之间的工作日时间差
url: Calculate_the_number_of_working_days_between_two_dates
tags:
  - SEO
  - AJAX
categories:
  - 编程杂谈
date: 2018-05-08 14:38:00
---
# 前言
搜索引擎是不执行`JavaScript`的, 换言之, 搜索引擎和`AJAX`加载数据是水火不容的。
不过[听说](https://github.com/cssmagic/blog-old/issues/22)谷歌的搜索引擎可以执行`AJAX`, 不愧是谷人希。

<!-- more -->

# 解决方案
既然搜索引擎不能爬到`AJAX`数据, 那么只要将数据写到`JSP`中就可以了。
但是这样就失去了`AJAX`局部加载的功能。

搜索引擎是爬取链接的, 那么只要以下形式加载数据, 就可以兼顾搜索引擎和`AJAX`了。
```html
<!-- http://localhost:8080/blog-1 -->
<c:set var="next" value="${page+1}"/><!-- JSP标签, next值为2 -->
<a href="/blog-${next}" onclick="ajaxBlog(${next}); return false;">加载第${next}页的blog</a>
```

在点击`<a>`标签的时候, 会执行以下顺序
1. 执行`onclick()`函数
2. 执行`ajaxBlog()`函数加载下一页的博客
3. `onclick()`函数`return false`拦截点击事件
4. `href`链接跳转被拦截, 不执行

数据加载就解决了, 但是又有个问题, 这个`<a>`标签也必须写在`JSP`中, 不能通过`JavaScript`生成, 因为搜索引擎不爬取`JavaScript`。
也就是说, 这个`<a>`标签, 分页器, 需要在`Java`代码拼接`Html`分页器。

分页器如下, 需要`Java`代码拼接`Html`, 传到`JSP`中。
```html
<a href="/blog-1" onclick="ajaxBlog(1); return false;">加载第1页的blog</a>
<a href="/blog-2" onclick="ajaxBlog(2); return false;">加载第2页的blog</a>
<a href="/blog-3" onclick="ajaxBlog(3); return false;">加载第3页的blog</a>
<a href="/blog-4" onclick="ajaxBlog(4); return false;">加载第4页的blog</a>
```

# 参考资料
- [ajax对于seo的影响](http://zy116494718.iteye.com/blog/1685776)